{"version":3,"file":"ngneat-helipopper.mjs","sources":["../../../../projects/ngneat/helipopper/src/lib/utils.ts","../../../../projects/ngneat/helipopper/src/lib/tippy.types.ts","../../../../projects/ngneat/helipopper/src/lib/tippy.directive.ts","../../../../projects/ngneat/helipopper/src/lib/defaults.ts","../../../../projects/ngneat/helipopper/src/lib/tippy.service.ts","../../../../projects/ngneat/helipopper/src/lib/providers.ts","../../../../projects/ngneat/helipopper/src/ngneat-helipopper.ts"],"sourcesContent":["import { Observable } from 'rxjs';\nimport { auditTime, map } from 'rxjs/operators';\nimport { TippyElement } from './tippy.types';\nimport { ElementRef } from '@angular/core';\n\ndeclare const ResizeObserver: any;\n\nlet supportsIntersectionObserver = false;\nlet supportsResizeObserver = false;\n\nif (typeof window !== 'undefined') {\n  supportsIntersectionObserver = 'IntersectionObserver' in window;\n  supportsResizeObserver = 'ResizeObserver' in window;\n}\n\nexport function inView(\n  host: TippyElement,\n  options: IntersectionObserverInit = {\n    root: null,\n    threshold: 0.3,\n  }\n) {\n  const element = coerceElement(host);\n\n  return new Observable((subscriber) => {\n    if (!supportsIntersectionObserver) {\n      subscriber.next();\n      subscriber.complete();\n      return;\n    }\n\n    const observer = new IntersectionObserver((entries) => {\n      // Several changes may occur in the same tick, we want to check the latest entry state.\n      const entry = entries[entries.length - 1];\n      if (entry.isIntersecting) {\n        subscriber.next();\n        subscriber.complete();\n      }\n    }, options);\n\n    observer.observe(element);\n\n    return () => observer.disconnect();\n  });\n}\n\nexport function isElementOverflow(host: HTMLElement): boolean {\n  // Don't access the `offsetWidth` multiple times since it triggers layout updates.\n  const hostOffsetWidth = host.offsetWidth;\n\n  return hostOffsetWidth > host.parentElement.offsetWidth || hostOffsetWidth < host.scrollWidth;\n}\n\nexport function overflowChanges(host: TippyElement) {\n  const element = coerceElement(host);\n\n  return dimensionsChanges(element).pipe(\n    auditTime(150),\n    map(() => isElementOverflow(element))\n  );\n}\n\nexport function dimensionsChanges(target: HTMLElement) {\n  return resizeObserverStrategy(target);\n}\n\nfunction resizeObserverStrategy(target: HTMLElement): Observable<boolean> {\n  return new Observable((subscriber) => {\n    if (!supportsResizeObserver) {\n      subscriber.next();\n      subscriber.complete();\n      return;\n    }\n\n    const observer = new ResizeObserver(() => subscriber.next(true));\n    observer.observe(target);\n    return () => observer.disconnect();\n  });\n}\n\nexport function onlyTippyProps(allProps: any) {\n  const tippyProps = {};\n\n  const ownProps = [\n    'useTextContent',\n    'variations',\n    'useHostWidth',\n    'defaultVariation',\n    'beforeRender',\n    'isLazy',\n    'variation',\n    'isEnabled',\n    'className',\n    'onlyTextOverflow',\n    'data',\n    'content',\n    'context',\n    'hideOnEscape',\n    'customHost',\n    'injector',\n    'preserveView',\n    'vcr',\n    'popperWidth',\n    'zIndexGetter',\n    'staticWidthHost',\n  ];\n\n  const overriddenMethods = ['onShow', 'onHidden', 'onCreate'];\n\n  Object.keys(allProps).forEach((prop) => {\n    if (!ownProps.includes(prop) && !overriddenMethods.includes(prop)) {\n      tippyProps[prop] = allProps[prop];\n    }\n  });\n\n  return tippyProps;\n}\n\nexport function normalizeClassName(className: string | string[]): string[] {\n  const classes = isString(className) ? className.split(' ') : className;\n\n  return classes.map((klass) => klass?.trim()).filter(Boolean);\n}\n\nexport function coerceCssPixelValue<T>(value: T): string {\n  if (isNil(value)) {\n    return '';\n  }\n\n  return typeof value === 'string' ? value : `${value}px`;\n}\n\nfunction isString(value: unknown): value is string {\n  return typeof value === 'string';\n}\n\nfunction isNil(value: any): value is undefined | null {\n  return value === undefined || value === null;\n}\n\nfunction coerceElement(element: TippyElement) {\n  return element instanceof ElementRef ? element.nativeElement : element;\n}\n\nlet observer: IntersectionObserver;\nconst elementHiddenHandlers = new WeakMap<Element, () => void>();\nexport function observeVisibility(host: Element, hiddenHandler: () => void) {\n  observer ??= new IntersectionObserver((entries: IntersectionObserverEntry[]) => {\n    entries.forEach((entry) => {\n      if (!entry.isIntersecting) {\n        elementHiddenHandlers.get(entry.target)!();\n      }\n    });\n  });\n  elementHiddenHandlers.set(host, hiddenHandler);\n  observer.observe(host);\n\n  return () => {\n    elementHiddenHandlers.delete(host);\n    observer.unobserve(host);\n  };\n}\n","import { Instance, Props } from 'tippy.js';\nimport { ElementRef, InjectionToken } from '@angular/core';\nimport { ResolveViewRef, ViewOptions } from '@ngneat/overview';\n\nexport interface CreateOptions extends Partial<TippyProps>, ViewOptions {\n  variation: string;\n  preserveView: boolean;\n  className: string | string[];\n  data: any;\n}\n\nexport type NgChanges<Component extends object, Props = ExcludeFunctions<Component>> = {\n  [Key in keyof Props]: {\n    previousValue: Props[Key];\n    currentValue: Props[Key];\n    firstChange: boolean;\n    isFirstChange(): boolean;\n  };\n};\n\ntype MarkFunctionPropertyNames<Component> = {\n  [Key in keyof Component]: Component[Key] extends Function ? never : Key;\n}[keyof Component];\n\ntype ExcludeFunctions<T extends object> = Pick<T, MarkFunctionPropertyNames<T>>;\n\nexport const TIPPY_CONFIG = new InjectionToken<Partial<TippyConfig>>('Tippy config', {\n  providedIn: 'root',\n  factory() {\n    return {};\n  }\n});\nexport const TIPPY_REF = new InjectionToken<TippyInstance>('TIPPY_REF');\n\nexport interface TippyInstance extends Instance {\n  data?: any;\n}\n\nexport type TippyProps = Props;\n\nexport interface TippyConfig extends TippyProps {\n  variations: Record<string, Partial<TippyProps>>;\n  defaultVariation: keyof TippyConfig['variations'];\n  beforeRender?: (text: string) => string;\n  zIndexGetter?(): number;\n}\n\nexport type TippyElement = ElementRef | Element;\n\nexport interface ExtendedTippyInstance<T> extends TippyInstance {\n  view: ResolveViewRef<T>;\n  $viewOptions: ViewOptions;\n  context?: ViewOptions['context'];\n}\n","import {\n  AfterViewInit,\n  booleanAttribute,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  Injector,\n  Input,\n  NgZone,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  PLATFORM_ID,\n  ViewContainerRef,\n} from '@angular/core';\nimport { isPlatformServer } from '@angular/common';\nimport tippy, { Instance } from 'tippy.js';\nimport { fromEvent, merge, Observable, Subject } from 'rxjs';\nimport { filter, map, switchMap, takeUntil } from 'rxjs/operators';\nimport { Content, isComponent, isString, isTemplateRef, ViewOptions, ViewRef, ViewService } from '@ngneat/overview';\n\nimport {\n  coerceCssPixelValue,\n  dimensionsChanges,\n  inView,\n  isElementOverflow,\n  normalizeClassName,\n  observeVisibility,\n  onlyTippyProps,\n  overflowChanges,\n} from './utils';\nimport { NgChanges, TIPPY_CONFIG, TIPPY_REF, TippyConfig, TippyInstance, TippyProps } from './tippy.types';\n\n@Directive({\n  // eslint-disable-next-line @angular-eslint/directive-selector\n  selector: '[tp]',\n  exportAs: 'tippy',\n  standalone: true,\n})\nexport class TippyDirective implements OnChanges, AfterViewInit, OnDestroy, OnInit {\n  @Input('tpAppendTo') set appendTo(appendTo: TippyProps['appendTo']) {\n    this.updateProps({ appendTo });\n  }\n  @Input('tp') content: Content | undefined | null;\n  @Input('tpDelay') delay: TippyProps['delay'];\n  @Input('tpDuration') duration: TippyProps['duration'];\n  @Input('tpHideOnClick') hideOnClick: TippyProps['hideOnClick'];\n  @Input('tpInteractive') interactive: TippyProps['interactive'];\n  @Input('tpInteractiveBorder') interactiveBorder: TippyProps['interactiveBorder'];\n  @Input('tpMaxWidth') maxWidth: TippyProps['maxWidth'];\n  @Input('tpOffset') offset: TippyProps['offset'];\n  @Input('tpPlacement') placement: TippyProps['placement'];\n  @Input('tpPopperOptions') popperOptions: TippyProps['popperOptions'];\n  @Input('tpShowOnCreate') showOnCreate: TippyProps['showOnCreate'];\n  @Input('tpTrigger') trigger: TippyProps['trigger'];\n  @Input('tpTriggerTarget') triggerTarget: TippyProps['triggerTarget'];\n  @Input('tpZIndex') zIndex: TippyProps['zIndex'];\n  @Input('tpAnimation') animation: TippyProps['animation'];\n  @Input({ transform: booleanAttribute, alias: 'tpUseTextContent' }) useTextContent: boolean;\n  @Input({ transform: booleanAttribute, alias: 'tpIsLazy' }) isLazy: boolean;\n  @Input('tpVariation') variation: string;\n  @Input('tpIsEnabled') isEnabled: boolean;\n  @Input('tpClassName') className: string | string[];\n  @Input({ transform: booleanAttribute, alias: 'tpOnlyTextOverflow' }) onlyTextOverflow = false;\n  @Input({ transform: booleanAttribute, alias: 'tpStaticWidthHost' }) staticWidthHost = false;\n  @Input('tpData') data: any;\n  @Input({ transform: booleanAttribute, alias: 'tpUseHostWidth' }) useHostWidth = false;\n  @Input({ transform: booleanAttribute, alias: 'tpHideOnEscape' }) hideOnEscape = false;\n  @Input('tpDetectChangesComponent') detectChangesComponent = true;\n  @Input('tpPopperWidth') popperWidth: number | string;\n  @Input('tpHost') customHost: HTMLElement;\n  @Input({ transform: booleanAttribute, alias: 'tpIsVisible' }) isVisible = false;\n\n  @Output('tpVisible') visible = new EventEmitter<boolean>();\n\n  protected instance: TippyInstance;\n  protected viewRef: ViewRef;\n  protected destroyed = new Subject<void>();\n  protected props: Partial<TippyConfig>;\n  protected enabled = true;\n  protected variationDefined = false;\n  protected viewOptions$: ViewOptions;\n\n  /**\n   * We had use `visible` event emitter previously as a `takeUntil` subscriber in multiple places\n   * within the directive.\n   * This is for internal use only; thus we don't have to deal with the `visible` event emitter\n   * and trigger change detections only when the `visible` event is being listened outside\n   * in the template (`<button [tippy]=\"...\" (visible)=\"...\"></button>`).\n   */\n  protected visibleInternal = new Subject<boolean>();\n  private visibilityObserverCleanup: () => void | undefined;\n  private contentChanged = new Subject<void>();\n\n  constructor(\n    @Inject(PLATFORM_ID) protected platformId: string,\n    @Inject(TIPPY_CONFIG) protected globalConfig: TippyConfig,\n    protected injector: Injector,\n    protected viewService: ViewService,\n    protected vcr: ViewContainerRef,\n    protected zone: NgZone,\n    protected hostRef: ElementRef\n  ) {}\n\n  ngOnChanges(changes: NgChanges<TippyDirective>) {\n    if (this.isServerSide) return;\n\n    let props: Partial<TippyConfig> = Object.keys(changes).reduce((acc, change) => {\n      if (change === 'isVisible') return acc;\n\n      acc[change] = changes[change].currentValue;\n\n      return acc;\n    }, {});\n\n    let variation: string;\n\n    if (isChanged('content', changes)) {\n      this.contentChanged.next();\n    }\n\n    if (isChanged('variation', changes)) {\n      variation = changes.variation.currentValue;\n      this.variationDefined = true;\n    } else if (!this.variationDefined) {\n      variation = this.globalConfig.defaultVariation;\n      this.variationDefined = true;\n    }\n\n    if (variation) {\n      props = {\n        ...this.globalConfig.variations[variation],\n        ...props,\n      };\n    }\n\n    if (isChanged('isEnabled', changes)) {\n      this.enabled = changes.isEnabled.currentValue;\n      this.setStatus();\n    }\n\n    if (isChanged('isVisible', changes)) {\n      this.isVisible ? this.show() : this.hide();\n    }\n\n    this.updateProps(props);\n  }\n\n  ngOnInit() {\n    if (this.useHostWidth) {\n      this.props.maxWidth = this.hostWidth;\n    }\n  }\n\n  ngAfterViewInit() {\n    if (this.isServerSide) return;\n\n    this.zone.runOutsideAngular(() => {\n      if (this.isLazy) {\n        if (this.onlyTextOverflow) {\n          inView(this.host)\n            .pipe(\n              switchMap(() => this.isOverflowing$()),\n              takeUntil(this.destroyed)\n            )\n            .subscribe((isElementOverflow) => {\n              this.checkOverflow(isElementOverflow);\n            });\n        } else {\n          inView(this.host)\n            .pipe(takeUntil(this.destroyed))\n            .subscribe(() => {\n              this.createInstance();\n            });\n        }\n      } else if (this.onlyTextOverflow) {\n        this.isOverflowing$()\n          .pipe(takeUntil(this.destroyed))\n          .subscribe((isElementOverflow) => {\n            this.checkOverflow(isElementOverflow);\n          });\n      } else {\n        this.createInstance();\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n    this.instance?.destroy();\n    this.destroyView();\n    this.visibilityObserverCleanup?.();\n  }\n\n  destroyView() {\n    this.viewOptions$ = null;\n    this.viewRef?.destroy();\n    this.viewRef = null;\n  }\n\n  /**\n   * This method is useful when you append to an element that you might remove from the DOM.\n   * In such cases we want to hide the tooltip and let it go through the destroy lifecycle.\n   * For example, if you have a grid row with an element that you toggle using the display CSS property on hover.\n   */\n  observeHostVisibility() {\n    if (this.isServerSide) return;\n    // We don't want to observe the host visibility if we are appending to the body.\n    if (this.props.appendTo && this.props.appendTo !== document.body) {\n      this.visibilityObserverCleanup?.();\n      return this.visibleInternal\n        .asObservable()\n        .pipe(takeUntil(this.destroyed))\n        .subscribe((isVisible) => {\n          if (isVisible) {\n            this.zone.runOutsideAngular(() => {\n              this.visibilityObserverCleanup = observeVisibility(this.instance.reference, () => {\n                this.hide();\n                // Because we have animation on the popper it doesn't close immediately doesn't trigger the `tpVisible` event.\n                // Tippy is relying on the transitionend event to trigger the `onHidden` callback.\n                // https://github.com/atomiks/tippyjs/blob/master/src/dom-utils.ts#L117\n                // This event never fires because the popper is removed from the DOM before the transition ends.\n                if (this.props.animation) {\n                  this.onHidden();\n                }\n              });\n            });\n          } else {\n            this.visibilityObserverCleanup?.();\n          }\n        });\n    }\n  }\n\n  show() {\n    this.instance?.show();\n  }\n\n  hide() {\n    this.instance?.hide();\n  }\n\n  enable() {\n    this.instance?.enable();\n  }\n\n  disable() {\n    this.instance?.disable();\n  }\n\n  protected updateProps(props: Partial<TippyConfig>) {\n    this.setProps({ ...this.props, ...props });\n  }\n\n  protected setProps(props: Partial<TippyConfig>) {\n    this.props = props;\n    this.instance?.setProps(onlyTippyProps(props));\n  }\n\n  protected setStatus() {\n    this.enabled ? this.instance?.enable() : this.instance?.disable();\n  }\n\n  protected get host(): HTMLElement {\n    return this.customHost || this.hostRef.nativeElement;\n  }\n\n  protected get hostWidth(): number {\n    return this.host.getBoundingClientRect().width;\n  }\n\n  protected createInstance() {\n    if (!this.content && !this.useTextContent) {\n      return;\n    }\n\n    this.zone.runOutsideAngular(() => {\n      this.instance = tippy(this.host, {\n        allowHTML: true,\n        appendTo: document.body,\n        ...(this.globalConfig.zIndexGetter ? { zIndex: this.globalConfig.zIndexGetter() } : {}),\n        ...onlyTippyProps(this.globalConfig),\n        ...onlyTippyProps(this.props),\n        onMount: (instance) => {\n          this.isVisible = true;\n          this.visibleInternal.next(this.isVisible);\n          if (this.visible.observed) {\n            this.zone.run(() => this.visible.next(this.isVisible));\n          }\n          this.useHostWidth && this.listenToHostResize();\n          this.globalConfig.onMount?.(instance);\n        },\n        onCreate: (instance) => {\n          instance.popper.classList.add(`tippy-variation-${this.variation || this.globalConfig.defaultVariation}`);\n          if (this.className) {\n            for (const klass of normalizeClassName(this.className)) {\n              instance.popper.classList.add(klass);\n            }\n          }\n          this.globalConfig.onCreate?.(instance);\n          if (this.isVisible === true) {\n            instance.show();\n          }\n        },\n        onShow: (instance) => {\n          instance.reference.setAttribute('data-tippy-open', '');\n          this.zone.run(() => {\n            const content = this.resolveContent(instance);\n            if (isString(content)) {\n              instance.setProps({ allowHTML: false });\n\n              if (!content?.trim()) {\n                this.disable();\n              } else {\n                this.enable();\n              }\n            }\n\n            instance.setContent(content);\n            this.hideOnEscape && this.handleEscapeButton();\n          });\n          if (this.useHostWidth) {\n            this.setInstanceWidth(instance, this.hostWidth);\n          } else if (this.popperWidth) {\n            this.setInstanceWidth(instance, this.popperWidth);\n          }\n          this.globalConfig.onShow?.(instance);\n        },\n        onHide(instance) {\n          instance.reference.removeAttribute('data-tippy-open');\n        },\n        onHidden: (instance) => {\n          this.onHidden(instance);\n        },\n      });\n\n      this.setStatus();\n      this.setProps(this.props);\n\n      this.variation === 'contextMenu' && this.handleContextMenu();\n    });\n  }\n\n  protected resolveContent(instance: TippyInstance) {\n    if (!this.viewOptions$ && !isString(this.content)) {\n      const injector = Injector.create({\n        providers: [\n          {\n            provide: TIPPY_REF,\n            useValue: this.instance,\n          },\n        ],\n        parent: this.injector,\n      });\n      if (isComponent(this.content)) {\n        this.instance.data = this.data;\n\n        this.viewOptions$ = {\n          injector,\n        };\n      } else if (isTemplateRef(this.content)) {\n        this.viewOptions$ = {\n          injector,\n          context: {\n            $implicit: this.hide.bind(this),\n            data: this.data,\n          },\n        };\n      }\n    }\n\n    this.viewRef = this.viewService.createView(this.content, {\n      vcr: this.vcr,\n      ...this.viewOptions$,\n    });\n\n    // We need to call detectChanges for onPush components to update the content\n    if (this.detectChangesComponent && isComponent(this.content)) {\n      this.viewRef.detectChanges();\n    }\n\n    let content = this.viewRef.getElement();\n\n    if (this.useTextContent) {\n      content = instance.reference.textContent;\n    }\n\n    if (isString(content) && this.globalConfig.beforeRender) {\n      content = this.globalConfig.beforeRender(content);\n    }\n\n    return content;\n  }\n\n  protected handleContextMenu() {\n    fromEvent(this.host, 'contextmenu')\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((event: MouseEvent) => {\n        event.preventDefault();\n\n        this.instance.setProps({\n          getReferenceClientRect: () =>\n            ({\n              width: 0,\n              height: 0,\n              top: event.clientY,\n              bottom: event.clientY,\n              left: event.clientX,\n              right: event.clientX,\n            } as DOMRectReadOnly),\n        });\n\n        this.instance.show();\n      });\n  }\n\n  protected handleEscapeButton(): void {\n    this.zone.runOutsideAngular(() => {\n      fromEvent(document.body, 'keydown')\n        .pipe(\n          filter(({ code }: KeyboardEvent) => code === 'Escape'),\n          takeUntil(merge(this.destroyed, this.visibleInternal.pipe(filter((v) => !v))))\n        )\n        .subscribe(() => this.hide());\n    });\n  }\n\n  protected checkOverflow(isElementOverflow: boolean) {\n    if (isElementOverflow) {\n      if (!this.instance) {\n        this.createInstance();\n      } else {\n        this.instance.enable();\n      }\n    } else {\n      this.instance?.disable();\n    }\n  }\n\n  protected listenToHostResize() {\n    dimensionsChanges(this.host)\n      .pipe(takeUntil(merge(this.destroyed, this.visibleInternal)))\n      .subscribe(() => {\n        this.setInstanceWidth(this.instance, this.hostWidth);\n      });\n  }\n\n  protected setInstanceWidth(instance: Instance, width: string | number) {\n    const inPixels = coerceCssPixelValue(width);\n    instance.popper.style.width = inPixels;\n    instance.popper.style.maxWidth = inPixels;\n    (instance.popper.firstElementChild as HTMLElement).style.maxWidth = inPixels;\n  }\n\n  private get isServerSide() {\n    return isPlatformServer(this.platformId);\n  }\n\n  private onHidden(instance: TippyInstance = this.instance) {\n    this.destroyView();\n    this.isVisible = false;\n    this.visibleInternal.next(this.isVisible);\n    if (this.visible.observed) {\n      this.zone.run(() => this.visible.next(this.isVisible));\n    }\n    this.globalConfig.onHidden?.(instance);\n  }\n\n  private isOverflowing$() {\n    const notifiers$ = [overflowChanges(this.host)];\n\n    // We need to handle cases where the host has a static width but the content might change\n    if (this.staticWidthHost) {\n      notifiers$.push(\n        this.contentChanged.asObservable().pipe(\n          // We need to wait for the content to be rendered before we can check if it's overflowing.\n          switchMap(() => {\n            return new Observable((subscriber) => {\n              const id = window.requestAnimationFrame(() => {\n                subscriber.next();\n                subscriber.complete();\n              });\n\n              return () => cancelAnimationFrame(id);\n            });\n          }),\n          map(() => isElementOverflow(this.host))\n        )\n      );\n    }\n\n    return merge(...notifiers$);\n  }\n}\n\nfunction isChanged(key: keyof NgChanges<TippyDirective>, changes: NgChanges<TippyDirective>) {\n  return key in changes;\n}\n","import { TippyConfig } from './tippy.types';\n\ntype Variation = TippyConfig['variations'][0];\n\nexport const tooltipVariation: Variation = {\n  theme: null,\n  arrow: false,\n  animation: 'scale',\n  trigger: 'mouseenter',\n  offset: [0, 5]\n};\n\nexport const popperVariation: Variation = {\n  theme: 'light',\n  arrow: true,\n  offset: [0, 10],\n  animation: null,\n  trigger: 'click',\n  interactive: true\n};\n\nexport function withContextMenuVariation(baseVariation: Variation): Variation {\n  return {\n    ...baseVariation,\n    placement: 'right-start',\n    trigger: 'manual',\n    arrow: false,\n    offset: [0, 0]\n  };\n}\n","import { Inject, Injectable, Injector } from '@angular/core';\nimport tippy from 'tippy.js';\nimport { isComponent, isTemplateRef, ViewService } from '@ngneat/overview';\nimport { Content } from '@ngneat/overview';\nimport { CreateOptions, ExtendedTippyInstance, TIPPY_CONFIG, TIPPY_REF, TippyConfig } from './tippy.types';\nimport { normalizeClassName, onlyTippyProps } from './utils';\n\n@Injectable({ providedIn: 'root' })\nexport class TippyService {\n  constructor(\n    @Inject(TIPPY_CONFIG) private globalConfig: TippyConfig,\n    private view: ViewService,\n    private injector: Injector\n  ) {}\n\n  create<T extends Content>(host: Element, content: T, options: Partial<CreateOptions> = {}): ExtendedTippyInstance<T> {\n    const variation = options.variation || this.globalConfig.defaultVariation;\n    const config = {\n      onShow: (instance) => {\n        host.setAttribute('data-tippy-open', '');\n        if (!instance.$viewOptions) {\n          instance.$viewOptions = {};\n\n          const injector = Injector.create({\n            providers: [\n              {\n                provide: TIPPY_REF,\n                useValue: instance,\n              },\n            ],\n            parent: options.injector || this.injector,\n          });\n\n          instance.$viewOptions.injector = injector;\n\n          if (isTemplateRef(content)) {\n            instance.$viewOptions.context = {\n              $implicit: instance.hide.bind(instance),\n              ...options.context,\n            };\n          } else if (isComponent(content)) {\n            instance.context = options.context;\n            instance.data = options.data;\n          }\n        }\n        if (!instance.view) {\n          instance.view = this.view.createView(content, { ...options, ...instance.$viewOptions });\n        }\n        instance.setContent(instance.view.getElement());\n        options?.onShow?.(instance);\n      },\n      onHidden: (instance) => {\n        host.removeAttribute('data-tippy-open');\n\n        if (!options.preserveView) {\n          instance.view.destroy();\n          instance.view = null;\n        }\n        options?.onHidden?.(instance);\n      },\n      ...onlyTippyProps(this.globalConfig),\n      ...this.globalConfig.variations[variation],\n      ...onlyTippyProps(options),\n      onCreate: (instance) => {\n        instance.popper.classList.add(`tippy-variation-${variation}`);\n        if (options.className) {\n          for (const klass of normalizeClassName(options.className)) {\n            instance.popper.classList.add(klass);\n          }\n        }\n        this.globalConfig.onCreate?.(instance);\n        options.onCreate?.(instance);\n      },\n    };\n\n    return tippy(host, config) as ExtendedTippyInstance<T>;\n  }\n}\n","import { inject, makeEnvironmentProviders } from '@angular/core';\nimport { TIPPY_CONFIG, TIPPY_REF, TippyConfig, TippyInstance } from './tippy.types';\n\nexport function provideTippyConfig(config: Partial<TippyConfig> = {}) {\n  return makeEnvironmentProviders([{ provide: TIPPY_CONFIG, useValue: config }]);\n}\n\nexport function injectTippyRef(): TippyInstance {\n  const instance = inject(TIPPY_REF, { optional: true });\n\n  if (instance) {\n    return instance;\n  }\n\n  throw new Error('tp is not provided in the current context or on one of its ancestors');\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["isString"],"mappings":"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"}